query Municipalities($locale: String!, $query: String, $ids: [String!]) {
  municipalities: searchMunicipalities(
    locale: $locale
    query: $query
    ids: $ids
  ) {
    id
    name
  }
}

query Operators($locale: String!, $query: String, $ids: [String!]) {
  operators: searchOperators(locale: $locale, query: $query, ids: $ids) {
    id
    name
  }
}

query Cantons($locale: String!, $query: String, $ids: [String!]) {
  cantons: searchCantons(locale: $locale, query: $query, ids: $ids) {
    id
    name
  }
}

query Search($locale: String!, $query: String) {
  search(locale: $locale, query: $query) {
    id
    name
  }
}

fragment operatorObservationFields on OperatorObservation {
  period
  municipality
  municipalityLabel
  operator
  operatorLabel
  canton
  cantonLabel
  category
  value(priceComponent: $priceComponent)
}

fragment medianObservationFields on MedianObservation {
  period
  canton
  cantonLabel
  category
  value(priceComponent: $priceComponent)
}

query Observations(
  $locale: String!
  $priceComponent: PriceComponent!
  $filters: ObservationFilters!
  $observationType: ObservationType
) {
  observations(
    locale: $locale
    filters: $filters
    observationType: $observationType
  ) {
    ... on OperatorObservation {
      ...operatorObservationFields
    }
    ... on MedianObservation {
      ...medianObservationFields
    }
  }
}

fragment operatorObservationWithAllPriceComponentsFields on OperatorObservation {
  period
  municipality
  municipalityLabel
  operator
  operatorLabel
  category

  aidfee: value(priceComponent: aidfee)
  fixcosts: value(priceComponent: fixcosts)
  charge: value(priceComponent: charge)
  gridusage: value(priceComponent: gridusage)
  energy: value(priceComponent: energy)
  fixcostspercent: value(priceComponent: fixcostspercent)
  total: value(priceComponent: total)
}

fragment medianObservationWithAllPriceComponentsFields on MedianObservation {
  period
  canton
  cantonLabel
  category

  aidfee: value(priceComponent: aidfee)
  # fixcosts: value(priceComponent: fixcosts)
  charge: value(priceComponent: charge)
  gridusage: value(priceComponent: gridusage)
  energy: value(priceComponent: energy)
  # fixcostspercent: value(priceComponent: fixcostspercent)
  total: value(priceComponent: total)
}

query ObservationsWithAllPriceComponents(
  $locale: String!
  $filters: ObservationFilters!
  $observationType: ObservationType
) {
  observations(
    locale: $locale
    filters: $filters
    observationType: $observationType
  ) {
    ... on OperatorObservation {
      ...operatorObservationWithAllPriceComponentsFields
    }
    ... on MedianObservation {
      ...medianObservationWithAllPriceComponentsFields
    }
  }
}

query OperatorDocuments($id: String!, $locale: String!) {
  operator(id: $id, locale: $locale) {
    documents {
      id
      name
      url
      year
      category
    }
  }
}

query WikiContent($locale: String!, $slug: String!) {
  wikiContent(locale: $locale, slug: $slug) {
    html
  }
}
