interface SearchResult {
  id: String!
  name: String!
}
type MunicipalityResult implements SearchResult {
  id: String!
  name: String!
}
type OperatorResult implements SearchResult {
  id: String!
  name: String!
}
type CantonResult implements SearchResult {
  id: String!
  name: String!
}

type Municipality {
  id: String!
  name: String!
  isAbolished: Boolean
  canton: Canton!
  operators: [Operator!]!
}

type Operator {
  id: String!
  name: String!
  municipalities: [Municipality!]!
  cantons: [Canton!]!
  documents: [OperatorDocument!]!
}

enum OperatorDocumentCategory {
  TARIFFS
  FINANCIAL_STATEMENT
  ANNUAL_REPORT
}

type OperatorDocument {
  id: String!
  name: String!
  url: String!
  year: String!
  category: OperatorDocumentCategory
}

type Canton {
  id: String!
  name: String!
  municipalities: [Municipality!]!
  operator: [Operator!]!
}

type OperatorObservation {
  municipality: String!
  municipalityLabel: String
  operator: String!
  operatorLabel: String
  canton: String!
  cantonLabel: String
  category: String!
  period: String!

  value(priceComponent: PriceComponent!): Float!
}

type CantonMedianObservation {
  canton: String!
  cantonLabel: String

  category: String!
  period: String!

  value(priceComponent: PriceComponent!): Float!
}

type SwissMedianObservation {
  category: String!
  period: String!

  value(priceComponent: PriceComponent!): Float!
}

union Observation =
    OperatorObservation
  | CantonMedianObservation
  | SwissMedianObservation

input ObservationFilters {
  period: [String!]
  municipality: [String!]
  canton: [String!]
  operator: [String!]
  category: [String!]
  product: [String!]
}

enum PriceComponent {
  aidfee
  fixcosts
  charge
  gridusage
  energy
  fixcostspercent
  total
}

enum ObservationKind {
  Canton
  Municipality
}

type WikiContent {
  html: String!
}

type SystemInfo {
  SPARQL_ENDPOINT: String!
  VERSION: String!
}

type CubeHealth {
  ok: Boolean!
  dimensions: [String!]!
}

type GeverDocumentContent {
  resp1: String!
  resp2: String!
  resp3: String!
  content: String!
}

type GeverDocumentSearchResult {
  title: String!
  id: String!
}

type Query {
  systemInfo: SystemInfo!
  municipalities(
    locale: String!
    query: String
    ids: [String!]
  ): [Municipality!]!
  allMunicipalities(locale: String!): [Municipality!]!
  cantons(locale: String!, query: String, ids: [String!]): [Canton!]!
  operators(locale: String!, query: String, ids: [String!]): [Operator!]!
  search(locale: String!, query: String): [SearchResult!]!
  searchMunicipalities(
    locale: String!
    query: String
    ids: [String!]
  ): [MunicipalityResult!]!
  searchCantons(
    locale: String!
    query: String
    ids: [String!]
  ): [CantonResult!]!
  searchOperators(
    locale: String!
    query: String
    ids: [String!]
  ): [OperatorResult!]!
  municipality(locale: String!, id: String!): Municipality
  canton(locale: String!, id: String!): Canton
  operator(locale: String!, id: String!): Operator

  observations(
    locale: String
    filters: ObservationFilters
    observationKind: ObservationKind
  ): [OperatorObservation!]

  cantonMedianObservations(
    locale: String
    filters: ObservationFilters
    observationKind: ObservationKind
  ): [CantonMedianObservation!]

  swissMedianObservations(
    locale: String
    filters: ObservationFilters
  ): [SwissMedianObservation!]

  wikiContent(locale: String!, slug: String!): WikiContent

  cubeHealth: CubeHealth

  geverDocumentContent(id: String!): GeverDocumentContent
  geverDocumentSearch(search: String!): GeverDocumentContent
}
